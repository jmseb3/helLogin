# Hellogin 
This is Compose Multiplatform auth library

## Features
- âœ… Google Login

## Installation
HelLogin is available on Maven Central. In your root project `build.gradle.kts` file (or `settings.gradle` file) add `mavenCentral()` to repositories.

```kotlin
repositories { 
  mavenCentral()
}
```

Then in your shared module add desired dependencies in `commonMain`. Latest version: x.y.z
```kotlin
sourceSets {
  commonMain.dependencies {
    implementation("io.github.jmseb3:hellogin-core:<version>") //core of library
    implementation("io.github.jmseb3:hellogin-google:<version>") //google login library
      
    implementation("io.github.jmseb3:hellogin-core-ui:<version>") //core of library for ui 
    implementation("io.github.jmseb3:hellogin-google-ui:<version>") //google login ui library
      
  }
}
```
-----

## How To Use
how to use this library

### Google

> don't forget Google Api console setting!!

1. plz install first `AndroidGoogleLoginOptionProvider` or `IOSGoogleLoginOptionProvider` per platform
~~~kotlin
//androidApp
class AppActivity : ComponentActivity(), AndroidGoogleLoginOptionProvider {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        GoogleLoginHelper.setProvider(this)
        enableEdgeToEdge()
        setContent { App() }
    }

    override fun provideGoogleIdOption(): GetGoogleIdOption {
        return GetGoogleIdOption.Builder()
            .setFilterByAuthorizedAccounts(false)
            .setServerClientId("336197927146-86mr7gssplbigvpq2nob1r0orpho8gvp.apps.googleusercontent.com")
            .build()
    }

    override fun handleGoogleToken(token: GoogleResult) {
        Log.d("JWH","success : $token")
    }

    override fun handleFail(error: Error?) {
        error?.printStackTrace()
        Log.d("JWH","fail : $error")
    }

    override fun provideContainer(): Container {
        return this
    }
}
~~~

~~~kotlin
//iosApp
fun MainViewController(): UIViewController {
    @OptIn(ExperimentalForeignApi::class)
    val provider = object : IOSGoogleLoginOptionProvider {
        override fun handleGoogleToken(token: GoogleResult) {
            print("JWH handle success : $token")
        }

        override fun handleFail(error: Error?) {
            print("JWH handle error : $error")
        }

        override fun provideContainer(): Container {
            val presentingViewController = ((UIApplication.sharedApplication().connectedScenes()
                .first() as? UIWindowScene)?.windows() as List<UIWindow?>).first()?.rootViewController()!!
            return presentingViewController
        }
    }
    GoogleLoginHelper.setProvider(provider)
    return ComposeUIViewController { App() }
}
~~~

2. launch `GoogleLoginHelper`
~~~kotlin
   GoogleLoginHelper.requestLogin() //this is suspend function
~~~
or if use `io.github.jmseb3:hellogin-google-ui` , GoogleLoginButton()
~~~kotlin
    GoogleLoginButton() // button action is GoogleLoginHelper.requestLogin()
~~~

3. you can receive result  `handleGoogleToken` or `handleFail`
